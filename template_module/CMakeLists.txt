cmake_minimum_required(VERSION 2.8)
project (itk-module-name)
set (version 4.0)

if(NOT itk-module-name-targets)
  set(itk-module-name-STANDALONE 1)
  set(itk-module-name-targets itk-module-name-targets)
  set(itk-module-name-targets-install "lib/cmake/itk-module-name-${version}/itk-module-name-targets.cmake")
  set(itk-module-name-targets-build "${itk-module-name_BINARY_DIR}/itk-module-name-targets.cmake")
  file(WRITE "${itk-module-name-targets-build}" "# Generated by CMake, do not edit!")
endif()

include_regular_expression("^.*$")

include(CTest)
include(CPack)

####  setup default paths
if(NOT LIBRARY_OUTPUT_PATH)
  set(LIBRARY_OUTPUT_PATH ${itk-module-name_BINARY_DIR}/lib CACHE INTERNAL "Single output directory for building all libraries.")
endif(NOT LIBRARY_OUTPUT_PATH)


if(NOT EXECUTABLE_OUTPUT_PATH)
  set(EXECUTABLE_OUTPUT_PATH ${itk-module-name_BINARY_DIR}/bin CACHE INTERNAL "Single output directory for building all executables.")
endif(NOT EXECUTABLE_OUTPUT_PATH)


set(itk-module-name_LIBRARY_PATH  ${LIBRARY_OUTPUT_PATH} CACHE  STATIC "where all the itk-module-name libraries are")

set(itk-module-name_INCLUDE_DIRS ${itk-module-name_SOURCE_DIR}/Source)
include_directories(${itk-module-name_INCLUDE_DIRS})


add_subdirectory(Source)

add_subdirectory(Testing)

configure_file(CMake/itk-module-name-config-build.cmake.in itk-module-name-config.cmake @ONLY)
configure_file(CMake/itk-module-name-config-install.cmake.in CMakeFiles/itk-module-name-config.cmake @ONLY)
configure_file(CMake/itk-module-name-config-version.cmake.in itk-module-name-config-version.cmake @ONLY)
install(FILES
  ${itk-module-name_BINARY_DIR}/CMakeFiles/itk-module-name-config.cmake
  ${itk-module-name_BINARY_DIR}/itk-module-name-config-version.cmake
  DESTINATION lib/cmake/itk-module-name-${version}
  )
if(itk-module-name-STANDALONE)
  install(EXPORT ${itk-module-name-targets} DESTINATION lib/cmake/itk-module-name-${version})
endif()
